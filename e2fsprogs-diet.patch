diff -ur e2fsprogs-1.41.3/configure.in e2fsprogs-1.41.3-diet/configure.in
--- e2fsprogs-1.41.3/configure.in	2009-03-17 22:03:38.000000000 +0100
+++ e2fsprogs-1.41.3-diet/configure.in	2009-03-17 22:01:22.000000000 +0100
@@ -701,7 +701,7 @@
 	[#include <sys/types.h>
 	 #include <sys/socket.h>])
 dnl
-AC_CHECK_FUNCS(chflags getrusage llseek lseek64 open64 fstat64 ftruncate64 getmntinfo strtoull strcasecmp srandom jrand48 fchown mallinfo fdatasync strnlen strptime strdup sysconf pathconf posix_memalign memalign valloc __secure_getenv prctl mmap utime setresuid setresgid usleep nanosleep getdtablesize getrlimit)
+AC_CHECK_FUNCS(chflags getrusage llseek lseek64 open64 fstat64 stat64 ftruncate64 getmntinfo strtoull strcasecmp srandom jrand48 fchown mallinfo fdatasync strnlen strptime strdup sysconf pathconf posix_memalign memalign valloc __secure_getenv prctl mmap utime setresuid setresgid usleep nanosleep getdtablesize getrlimit)
 dnl
 dnl Check to see if -lsocket is required (solaris) to make something
 dnl that uses socket() to compile; this is needed for the UUID library
diff -ur e2fsprogs-1.41.3/misc/util.c e2fsprogs-1.41.3-diet/misc/util.c
--- e2fsprogs-1.41.3/misc/util.c	2008-10-07 16:22:39.000000000 +0200
+++ e2fsprogs-1.41.3-diet/misc/util.c	2009-03-17 22:01:31.000000000 +0100
@@ -79,7 +79,7 @@
 void check_plausibility(const char *device)
 {
 	int val;
-#ifdef HAVE_OPEN64
+#ifdef HAVE_STAT64
 	struct stat64 s;
 
 	val = stat64(device, &s);

